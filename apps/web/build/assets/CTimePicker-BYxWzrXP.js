import{r as u,R as t,c as M,P as n,_ as fn,a as R}from"./index-JP7vHK7p.js";import{b as w}from"./index.esm-2WuAEctV.js";import{C as Ke}from"./CFormControlWrapper-BwCbgVGS.js";import{Y as Ue,a5 as dn,a7 as mn,a6 as pn}from"./ProBadge-BSKes2oQ.js";var _=u.forwardRef(function(e,o){var i=e.children,l=e.className,c=e.container,s=c===void 0?"dropdown":c,m=e.disabled,k=e.dropdownClassNames,h=e.footer,p=e.footerContent,a=e.onHide,v=e.onShow,y=e.portal,K=y===void 0?!0:y,F=e.toggler,P=e.visible,E=u.useRef(null),L=Ue(o,E),T=u.useRef(null),D=u.useRef(null),U=dn(),j=U.initPopper,ee=U.destroyPopper,G=u.useState(P),O=G[0],H=G[1],C={placement:mn(E.current)?"bottom-end":"bottom-start",modifiers:[{name:"preventOverflow",options:{boundary:"clippingParents"}},{name:"offset",options:{offset:[0,2]}}]};u.useEffect(function(){H(P)},[P]),u.useEffect(function(){return s!=="inline"&&O&&(v&&v(),window.addEventListener("mouseup",Y),window.addEventListener("keyup",W),D.current&&T.current&&j(D.current,T.current,C)),function(){a&&a(),window.removeEventListener("mouseup",Y),window.removeEventListener("keyup",W),ee()}},[O]);var W=function(V){V.key==="Escape"&&H(!1)},Y=function(V){E.current&&E.current.contains(V.target)||T.current&&T.current.contains(V.target)||H(!1)};switch(s){case"inline":return t.createElement("div",{className:M("picker",l),ref:L},i);default:return t.createElement("div",{className:M(l,{show:O}),onClick:function(){return!m&&H(!0)},ref:L},F&&t.isValidElement(F)&&t.cloneElement(F,{ref:D}),t.createElement(pn,{portal:K},t.createElement("div",{className:M(k,{show:K&&O}),ref:T},i,h&&p)))}});_.displayName="CPicker";_.propTypes={children:n.node,className:n.string,container:n.oneOf(["dropdown","inline"]),disabled:n.bool,dropdownClassNames:n.string,footer:n.bool,footerContent:n.node,onHide:n.func,onShow:n.func,portal:n.bool,toggler:n.node,visible:n.bool};var vn=function(e){var o=u.useState(!1),i=o[0],l=o[1];return u.useEffect(function(){var c=new IntersectionObserver(function(s){var m=s[0];return l(m.isIntersecting)});return e.current&&c.observe(e.current),function(){return c.disconnect()}},[]),i},I=u.forwardRef(function(e,o){var i=e.elements,l=e.onClick,c=e.selected,s=u.useRef(!0),m=u.useRef(null),k=Ue(o,m),h=vn(m);u.useEffect(function(){var a,v,y=(a=m.current)===null||a===void 0?void 0:a.querySelector(".selected");h&&y&&y instanceof HTMLElement&&((v=m.current)===null||v===void 0||v.scrollTo({top:y.offsetTop,behavior:s.current?"auto":"smooth"})),h&&(s.current=!1)},[h,c]);var p=function(a,v){(a.code==="Space"||a.key==="Enter")&&(a.preventDefault(),l&&l(v))};return t.createElement("div",{className:"time-picker-roll-col",ref:k},i.map(function(a,v){return t.createElement("div",{className:M("time-picker-roll-cell",{selected:a.value===c}),key:v,onClick:function(){return l&&l(a.value)},onKeyDown:function(y){return p(y,a.value)},role:"button",tabIndex:0},a.label)}))});I.propTypes={elements:n.array.isRequired,onClick:n.func,selected:n.oneOfType([n.number,n.string])};I.displayName="CTimePickerRollCol";var gn=function(e,o){return e==="am"&&o===12?0:e==="am"?o:e==="pm"&&o===12?12:o+12},bn=function(e){return e%12||12},ae=function(e){return e?e instanceof Date?e:new Date("1970-01-01 ".concat(e)):null},Fe=function(e,o){return e.toLocaleTimeString(o).includes("AM")?"am":e.toLocaleTimeString(o).includes("PM")||e.getHours()>=12?"pm":"am"},le=function(e,o,i){var l=new Date,c=new Intl.DateTimeFormat(o,{hour:"numeric",minute:"2-digit",second:"2-digit"});return e.map(function(s){var m;return i==="hour"&&l.setHours(s),i==="minute"&&l.setMinutes(s),i==="second"&&l.setSeconds(s),{value:s,label:((m=c.formatToParts(l).find(function(k){return k.type===i}))===null||m===void 0?void 0:m.value)||""}})},yn=function(e,o,i,l,c){o===void 0&&(o="auto"),i===void 0&&(i=[]),l===void 0&&(l=[]),c===void 0&&(c=[]);var s=o==="auto"&&je(e)||o===!0,m=Array.isArray(i)&&i.length>0?i:typeof i=="function"?Array.from({length:s?12:24},function(p,a){return s?a+1:a}).filter(function(p){return i(p)}):Array.from({length:s?12:24},function(p,a){return s?a+1:a}),k=Array.isArray(l)&&l.length>0?l:typeof l=="function"?Array.from({length:60},function(p,a){return a}).filter(function(p){return l(p)}):Array.from({length:60},function(p,a){return a}),h=Array.isArray(c)&&c.length>0?c:typeof c=="function"?Array.from({length:60},function(p,a){return a}).filter(function(p){return c(p)}):Array.from({length:60},function(p,a){return a});return{listOfHours:le(m,e,"hour"),listOfMinutes:le(k,e,"minute"),listOfSeconds:le(h,e,"second"),hour12:s}},Le=function(e,o,i){return i===void 0&&(i="auto"),e?i==="auto"&&je(o)||i===!0?bn(e.getHours()):e.getHours():""},qe=function(e){return e?e.getMinutes():""},xe=function(e){return e?e.getSeconds():""},je=function(e){return["am","AM","pm","PM"].some(function(o){return new Date().toLocaleString(e).includes(o)})},kn=function(e){var o=new Date("1970-01-01T".concat(e));return o instanceof Date&&!Number.isNaN(o.getTime())},hn=function(e,o){var i=u.useRef();return u.useCallback(function(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];var s=function(){clearTimeout(i.current),e.apply(void 0,l)};clearTimeout(i.current),i.current=setTimeout(s,o)},[e,o])},ue,ce,se,fe,de,me,Ge=u.forwardRef(function(e,o){var i,l,c=e.ampm,s=c===void 0?"auto":c,m=e.cancelButton,k=m===void 0?"Cancel":m,h=e.cancelButtonColor,p=h===void 0?"primary":h,a=e.cancelButtonSize,v=a===void 0?"sm":a,y=e.cancelButtonVariant,K=y===void 0?"ghost":y,F=e.className,P=e.cleaner,E=P===void 0?!0:P,L=e.confirmButton,T=L===void 0?"OK":L,D=e.confirmButtonColor,U=D===void 0?"primary":D,j=e.confirmButtonSize,ee=j===void 0?"sm":j,G=e.confirmButtonVariant,O=e.container,H=O===void 0?"dropdown":O,C=e.disabled,W=e.feedback,Y=e.feedbackInvalid,V=e.feedbackValid,pe=e.footer,We=pe===void 0?!0:pe,Ye=e.hours,ve=e.id,ge=e.indicator,ne=ge===void 0?!0:ge,be=e.inputOnChangeDelay,Je=be===void 0?750:be,Qe=e.inputReadOnly,te=e.invalid,Xe=e.label,ye=e.locale,z=ye===void 0?"default":ye,ke=e.minutes,J=ke===void 0?!0:ke,Ze=e.name,Q=e.onTimeChange,he=e.onHide,Ce=e.onShow,Ee=e.placeholder,$e=Ee===void 0?"Select time":Ee,Te=e.portal,_e=Te===void 0?!1:Te,en=e.required,Se=e.seconds,X=Se===void 0?!0:Se,we=e.size,nn=e.text,Z=e.time,tn=e.tooltipFeedback,N=e.valid,Oe=e.variant,Ne=Oe===void 0?"roll":Oe,rn=e.visible,Be=fn(e,["ampm","cancelButton","cancelButtonColor","cancelButtonSize","cancelButtonVariant","className","cleaner","confirmButton","confirmButtonColor","confirmButtonSize","confirmButtonVariant","container","disabled","feedback","feedbackInvalid","feedbackValid","footer","hours","id","indicator","inputOnChangeDelay","inputReadOnly","invalid","label","locale","minutes","name","onTimeChange","onHide","onShow","placeholder","portal","required","seconds","size","text","time","tooltipFeedback","valid","variant","visible"]),q=u.useRef(),B=u.useRef(null),Re=u.useState(ae(Z)),d=Re[0],x=Re[1],Pe=u.useState(null),De=Pe[0],on=Pe[1],He=u.useState(N??(te===!0?!1:void 0)),$=He[0],re=He[1],Ve=u.useState(d?Fe(new Date(d),z):"am"),ie=Ve[0],an=Ve[1],ze=u.useState(rn),oe=ze[0],A=ze[1],Ae=u.useState({listOfHours:[],listOfMinutes:[],listOfSeconds:[],hour12:!1}),f=Ae[0],ln=Ae[1];u.useEffect(function(){x(Z?ae(Z):null)},[Z]),u.useEffect(function(){re(N??(te===!0?!1:void 0))},[N,te]),u.useEffect(function(){ln(yn(z,s,Ye,J,X)),B.current&&(B.current.value=d?d.toLocaleTimeString(z,R(R({hour12:f&&f.hour12,hour:"numeric"},J&&{minute:"numeric"}),X&&{second:"numeric"})):""),d&&an(Fe(new Date(d),z))},[d]),u.useEffect(function(){B.current&&B.current.form&&(q.current=B.current.form)},[B]),u.useEffect(function(){q.current&&(q.current.addEventListener("submit",function(r){setTimeout(function(){return Me(r.target)})}),Me(q.current))},[q,d]);var Ie=function(r){r.stopPropagation(),x(null),Q&&Q(null)},Me=function(r){if(r.classList.contains("was-validated")){if(d)return re(!0);re(!1)}},un=hn(function(r){return kn(r)&&x(ae(r))},Je),S=function(r,g){var b=d||new Date("1970-01-01");r==="toggle"&&(g==="am"&&b.setHours(b.getHours()-12),g==="pm"&&b.setHours(b.getHours()+12)),r==="hours"&&(f&&f.hour12?b.setHours(gn(ie,Number.parseInt(g))):b.setHours(Number.parseInt(g))),r==="minutes"&&b.setMinutes(Number.parseInt(g)),r==="seconds"&&b.setSeconds(Number.parseInt(g)),x(new Date(b)),Q&&Q(b.toTimeString(),b.toLocaleTimeString(),b)},cn=function(){return t.createElement("div",{className:"time-picker-input-group"},t.createElement("input",{autoComplete:"off",className:"time-picker-input",disabled:C,id:ve,name:Ze,onChange:function(r){return un(r.target.value)},placeholder:$e,readOnly:Qe,required:en,ref:B}),ne&&(typeof ne=="boolean"?t.createElement("div",R({className:"time-picker-indicator"},C!==!1&&{onClick:function(){return A(!oe)},onKeyDown:function(r){r.key==="Enter"&&A(!oe)},tabIndex:0})):ne),E&&d&&(typeof E=="boolean"?t.createElement("div",{className:"time-picker-cleaner",onClick:function(r){return Ie(r)}}):t.isValidElement(E)&&t.cloneElement(E,{onClick:function(r){return Ie(r)}})))},sn=function(){return t.createElement(t.Fragment,null,t.createElement("span",{className:"time-picker-inline-icon"}),t.createElement("select",{className:"time-picker-inline-select",disabled:C,onChange:function(r){return S("hours",r.target.value)},value:Le(d,z)},f&&f.listOfHours.map(function(r,g){return t.createElement("option",{value:r.value.toString(),key:g},r.label)})),J&&t.createElement(t.Fragment,null,t.createElement(t.Fragment,null,":"),t.createElement("select",{className:"time-picker-inline-select",disabled:C,onChange:function(r){return S("minutes",r.target.value)},value:qe(d)},f&&f.listOfMinutes.map(function(r,g){return t.createElement("option",{value:r.value.toString(),key:g},r.label)}))),X&&t.createElement(t.Fragment,null,t.createElement(t.Fragment,null,":"),t.createElement("select",{className:"time-picker-inline-select",disabled:C,onChange:function(r){return S("seconds",r.target.value)},value:xe(d)},f&&f.listOfSeconds.map(function(r,g){return t.createElement("option",{value:r.value.toString(),key:g},r.label)}))),f&&f.hour12&&t.createElement("select",{className:"time-picker-inline-select",disabled:C,onChange:function(r){return S("toggle",r.target.value)},value:ie},t.createElement("option",{value:"am"},"AM"),t.createElement("option",{value:"pm"},"PM")))};return t.createElement(Ke,{describedby:Be["aria-describedby"],feedback:W,feedbackInvalid:Y,feedbackValid:V,id:ve,invalid:$===!1,label:Xe,text:nn,tooltipFeedback:tn,valid:$},t.createElement(_,R({className:M("time-picker",(i={},i["time-picker-".concat(we)]=we,i.disabled=C,i["is-invalid"]=$===!1,i["is-valid"]=$,i),F),container:H,disabled:C,dropdownClassNames:"time-picker-dropdown",footer:We,footerContent:t.createElement("div",{className:"time-picker-footer"},k&&t.createElement(w,{color:p,size:v,variant:K,onClick:function(){De&&x(new Date(De)),A(!1)}},k),T&&t.createElement(w,{color:U,size:ee,variant:G,onClick:function(){A(!1)}},T)),onHide:function(){A(!1),he&&he()},onShow:function(){d&&on(new Date(d)),A(!0),Ce&&Ce()},portal:_e,toggler:cn(),visible:oe},Be,{ref:o}),t.createElement("div",{className:M("time-picker-body",(l={},l["time-picker-roll"]=Ne==="roll",l))},Ne==="select"?t.createElement(sn,null):t.createElement(t.Fragment,null,t.createElement(I,{elements:f&&f.listOfHours,onClick:function(r){return S("hours",r.toString())},selected:Le(d,z,s)}),J&&t.createElement(I,{elements:f&&f.listOfMinutes,onClick:function(r){return S("minutes",r.toString())},selected:qe(d)}),X&&t.createElement(I,{elements:f&&f.listOfSeconds,onClick:function(r){return S("seconds",r.toString())},selected:xe(d)}),f&&f.hour12&&t.createElement(I,{elements:[{value:"am",label:"AM"},{value:"pm",label:"PM"}],onClick:function(r){return S("toggle",r)},selected:ie})))))});Ge.propTypes=R(R(R({},Ke.propTypes),_.propTypes),{ampm:n.oneOfType([n.oneOf(["auto"]),n.bool]),cancelButton:n.oneOfType([n.bool,n.node]),cancelButtonColor:(ue=w.propTypes)===null||ue===void 0?void 0:ue.color,cancelButtonSize:(ce=w.propTypes)===null||ce===void 0?void 0:ce.size,cancelButtonVariant:(se=w.propTypes)===null||se===void 0?void 0:se.variant,className:n.string,confirmButton:n.oneOfType([n.bool,n.node]),confirmButtonColor:(fe=w.propTypes)===null||fe===void 0?void 0:fe.color,confirmButtonSize:(de=w.propTypes)===null||de===void 0?void 0:de.size,confirmButtonVariant:(me=w.propTypes)===null||me===void 0?void 0:me.variant,hours:n.oneOfType([n.arrayOf(n.number.isRequired),n.func]),id:n.string,inputOnChangeDelay:n.number,locale:n.string,minutes:n.oneOfType([n.bool,n.arrayOf(n.number.isRequired),n.func]),name:n.string,onTimeChange:n.func,required:n.bool,seconds:n.oneOfType([n.bool,n.arrayOf(n.number.isRequired),n.func]),time:n.oneOfType([n.instanceOf(Date),n.string]),variant:n.oneOf(["roll","select"])});Ge.displayName="CTimePicker";export{_ as C,Ge as a,hn as u};
