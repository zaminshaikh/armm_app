import{r as e,_ as A,R as o,a as C,c as y,P as E}from"./index-JP7vHK7p.js";import{Y as D}from"./ProBadge-BSKes2oQ.js";var R=e.forwardRef(function(u,_){var f=u.children,H=u.className,r=u.visibleItems,v=u.onScroll,M=A(u,["children","className","visibleItems","onScroll"]),s=e.useRef(null),T=e.useRef(null),w=D(_,s),h=e.useState(Math.floor(r/2)),m=h[0],x=h[1],g=e.useState(1),n=g[0],V=g[1],S=e.useState(0),t=S[0],F=S[1],d=e.useState(o.Children.count(f)),c=d[0],P=d[1],N=e.useState(0),p=N[0],k=N[1],b=e.useState(r*t+2*p),Y=b[0],B=b[1],I=e.useState(c*t+2*p),q=I[0],j=I[1];e.useEffect(function(){s.current&&s.current.scrollTop,s.current&&k(Number.parseFloat(getComputedStyle(s.current).paddingTop))}),e.useEffect(function(){P(o.Children.count(f))},[f]),e.useEffect(function(){B(Math.min(r,c)*t+2*p)},[t,c,p,r]),e.useEffect(function(){j(c*t),s.current&&s.current.scrollTop},[t,c]),e.useEffect(function(){x(Math.floor(r/2))},[r]);var z=function(l){var a=t&&Math.max(Math.ceil(l/t),1);V(a),v&&v(a)};return o.createElement("div",C({className:y("virtual-scroller",H),onScroll:function(l){return z(l.target.scrollTop)},style:{height:Y,overflowY:"auto"},ref:w},M),o.createElement("div",{className:"virtual-scroller-content",style:{height:q},ref:T},o.Children.map(f,function(l,a){if(o.isValidElement(l)&&a+1>Math.max(n-m,0)&&a+1<=n+r+m)return o.cloneElement(l,{className:y(l.props.className,{"virtual-scroller-item-preload":a+1>n+r||a+1<n}),key:a,style:C({},n>m&&{transform:"translateY(".concat((n-m)*t,"px)")}),ref:function(i){return i&&i.offsetHeight&&F(i.offsetHeight+Number.parseFloat(getComputedStyle(i).marginTop)+Number.parseFloat(getComputedStyle(i).marginBottom))}})})))});R.propTypes={onScroll:E.func,visibleItems:E.number.isRequired};R.displayName="CVirtualScroller";export{R as C};
